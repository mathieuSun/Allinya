{
  "version": 3,
  "sources": ["../../api/_lib/cors.ts"],
  "sourcesContent": ["import type { VercelRequest, VercelResponse } from '@vercel/node';\nimport { BUILD_TIMESTAMP } from './config';\n\nexport function handleCors(req: VercelRequest, res: VercelResponse): boolean {\n  // Set CORS headers\n  res.setHeader('Access-Control-Allow-Credentials', 'true');\n  res.setHeader('Access-Control-Allow-Origin', req.headers.origin || '*');\n  res.setHeader('Access-Control-Allow-Methods', 'GET, POST, PUT, DELETE, OPTIONS');\n  res.setHeader(\n    'Access-Control-Allow-Headers',\n    'X-CSRF-Token, X-Requested-With, Accept, Accept-Version, Content-Length, Content-MD5, Content-Type, Date, X-Api-Version, Authorization'\n  );\n  \n  // Set cache headers for iOS\n  res.setHeader('Cache-Control', 'no-cache, no-store, must-revalidate, private, max-age=0');\n  res.setHeader('Pragma', 'no-cache');\n  res.setHeader('Expires', '0');\n  res.setHeader('X-Content-Type-Options', 'nosniff');\n  res.setHeader('Vary', 'Accept-Encoding, Origin');\n  \n  const userAgent = req.headers['user-agent'] || '';\n  if (userAgent.includes('WebKit') || userAgent.includes('iPad') || userAgent.includes('iPhone')) {\n    res.setHeader('Clear-Site-Data', '\"cache\"');\n    res.setHeader('X-iOS-Cache-Bust', BUILD_TIMESTAMP);\n  }\n\n  // Handle OPTIONS request\n  if (req.method === 'OPTIONS') {\n    res.status(200).end();\n    return true;\n  }\n  \n  return false;\n}"],
  "mappings": "AACA,SAAS,uBAAuB;AAEzB,SAAS,WAAW,KAAoB,KAA8B;AAE3E,MAAI,UAAU,oCAAoC,MAAM;AACxD,MAAI,UAAU,+BAA+B,IAAI,QAAQ,UAAU,GAAG;AACtE,MAAI,UAAU,gCAAgC,iCAAiC;AAC/E,MAAI;AAAA,IACF;AAAA,IACA;AAAA,EACF;AAGA,MAAI,UAAU,iBAAiB,yDAAyD;AACxF,MAAI,UAAU,UAAU,UAAU;AAClC,MAAI,UAAU,WAAW,GAAG;AAC5B,MAAI,UAAU,0BAA0B,SAAS;AACjD,MAAI,UAAU,QAAQ,yBAAyB;AAE/C,QAAM,YAAY,IAAI,QAAQ,YAAY,KAAK;AAC/C,MAAI,UAAU,SAAS,QAAQ,KAAK,UAAU,SAAS,MAAM,KAAK,UAAU,SAAS,QAAQ,GAAG;AAC9F,QAAI,UAAU,mBAAmB,SAAS;AAC1C,QAAI,UAAU,oBAAoB,eAAe;AAAA,EACnD;AAGA,MAAI,IAAI,WAAW,WAAW;AAC5B,QAAI,OAAO,GAAG,EAAE,IAAI;AACpB,WAAO;AAAA,EACT;AAEA,SAAO;AACT;",
  "names": []
}
